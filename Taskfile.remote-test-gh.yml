# Test for remote Taskfiles from GitHub Pages
# Run with: TASK_X_REMOTE_TASKFILES=1 task -t Taskfile.remote-test-gh.yml --list --yes
#
# Requires: GitHub Pages deployed at https://joeblew999.github.io/plat-telemetry/

version: '3'

vars:
  RELEASE_REPO: joeblew999/plat-telemetry
  RELEASE_VERSION: latest
  DIST_DIR: '{{.ROOT_DIR}}/.dist'
  # GitHub Pages URL (production)
  REMOTE_BASE: https://joeblew999.github.io/plat-telemetry/taskfiles

includes:
  nats:
    taskfile: '{{.REMOTE_BASE}}/nats/Taskfile.yml'

tasks:
  default:
    desc: Show available tasks
    cmds:
      - task --list

  test:
    desc: Test that remote include works from GitHub Pages
    cmds:
      - echo "GitHub Pages remote Taskfile include works!"
      - 'echo "NATS version configured as {{.NATS_VERSION | default "not-set"}}"'
